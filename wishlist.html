<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>JavaScript wishlist example</h1>

    <p>
      In this example, we're going to write a small application that lets us add
      products to a wishlist. Please note that it's 100% client side and we
      don't store any data, so if you refresh your page: the wishlist will be
      emptied.
    </p>

    <p>
      This example has 3 products, each product has its Add to wishlist button.
      When we click on this button, the product will be added to the wishlist,
      which will then be refresh and displayed.
    </p>

    <p>
      We will create a the prototype object to create a class that will be
      responsible to manage the wishlist. The skeleton of this class is already
      created, you will need to write the methods not implemented.
    </p>

    <h2>Products</h2>

    <ul>
      <li>
        <span>Product 1</span>
        <button
          id="product-1"
          data-id="P1"
          data-name="Product 1"
          class="add-to-wishlist"
        >
          Add to wishlist
        </button>
      </li>
      <li>
        <span>Product 2</span>
        <button
          id="product-2"
          data-id="P2"
          data-name="Product 2"
          class="add-to-wishlist"
        >
          Add to wishlist
        </button>
      </li>
      <li>
        <span>Product 3</span>
        <button
          id="product-3"
          data-id="P3"
          data-name="Product 3"
          class="add-to-wishlist"
        >
          Add to wishlist
        </button>
      </li>
    </ul>

    <h2>Wishlist</h2>

    <ul id="wishlist"></ul>

    <!-- JAVASCRIPT -->
    <script>
      const Wishlist = function (elementId) {
        // This array will contain the items present in the wishlist
        this.items = [];

        // We keep a reference to the element associated to the whishlist
        this.element = document.getElementById(elementId);
      };

      // TO IMPLEMENT
      Wishlist.prototype.contains = function (itemId) {
        // This method should check in the `items` array if there's any item with the specified `itemId``, if yes, it should return true, otherwise it will return false;
      };

      // TO IMPLEMENT
      Wishlist.prototype.add = function (item) {
        // This method should add the item to the `items` array, then call the `render` method. You need to make sure that the item can't be added twice.
      };

      // TO IMPLEMENT
      Wishlist.prototype.remove = function (itemId) {
        // This method should remove the item specified by `itemId` from the `items` array. Then, you need to call the render method
      };

      Wishlist.prototype.render = function () {
        this.clear();

        this.items.forEach((i) => {
          const li = document.createElement("li");
          const remove = document.createElement("button");
          remove.innerHTML = "Remove from wishlist";
          remove.addEventListener("click", (e) => {
            this.remove(i.id);
          });
          li.innerHTML = i.name;
          li.appendChild(remove);

          this.element.appendChild(li);
        });
      };

      Wishlist.prototype.clear = function () {
        this.element.querySelectorAll("li").forEach((li) => {
          this.element.removeChild(li);
        });
      };

      const wishlist = new Wishlist("wishlist");

      document.querySelectorAll(".add-to-wishlist").forEach((e) => {
        e.addEventListener("click", (ev) => {
          const element = ev.target;
          wishlist.add({
            id: element.dataset.id,
            name: element.dataset.name,
          });
        });
      });
    </script>
  </body>
</html>
